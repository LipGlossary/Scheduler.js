!function(a,b){"function"==typeof define&&define.amd?define("scheduler",[],function(){return a.Scheduler=b()}):"object"==typeof exports?module.exports=b():a.Scheduler=b()}(this,function(){var a;return a=function(){this.paused=!1,this.tasks={},this._startLoop=this._startLoop.bind(this),this._startLoop()},a.prototype.schedule=function(){var a,b,c;if("string"==typeof arguments[0]?(b=arguments[0],c=arguments[1],a=arguments[2]||window):(b=this.tasks.length,c=arguments[0],a=arguments[1]||window),this.tasks[b])throw new RangeError('A task with the ID "'+b+'" already exists');return this.tasks[b]={context:a,paused:!1,task:c},b},a.prototype.unschedule=function(a){return delete this.tasks[a],!this.tasks[a]},a.prototype.clear=function(){this.tasks={}},a.prototype.pause=function(a){console.log("Pausing",a||"scheduler"),a?this.tasks[a].paused=!0:this.paused=!0},a.prototype.start=function(a){console.log("Starting",a||"scheduler"),a?this.tasks[a].paused=!1:this.paused=!1},a.prototype._taskCaller=function(a){a.task.call(a.context)},a.prototype._startLoop=function(){var a,b,c;if(b=this,c=Object.keys(this.tasks),requestAnimationFrame(b._startLoop),!this.paused)for(a=0;a<c.length;a++){var d;d=this.tasks[c[a]],d.paused||this._taskCaller(d)}},a});